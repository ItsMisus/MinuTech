<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offerte - MISUSTECH</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@500&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Top Social Bar -->
    <div class="top-social-bar">
        <div class="social-icons">
            <a href="https://instagram.com" target="_blank" title="Instagram">ðŸ“·</a>
            <a href="https://tiktok.com" target="_blank" title="TikTok">ðŸŽµ</a>
        </div>
        <div class="top-center-text">OFFERTE NON SOLO CON IL BLACK FRIDAY</div>
        <a href="contattaci.html" class="contact-us-link">Contact Us</a>
    </div>

    <!-- Header -->
   <!-- NUOVO HEADER STRUTTURA - Copia in TUTTI gli HTML -->
<header class="header-container">
    <!-- Logo Sinistra -->
    <div class="logo" onclick="window.location.href='index.html'">MISUSTECH</div>
    
    <!-- Hamburger Menu Mobile -->
    <div class="hamburger">
        <span></span>
        <span></span>
        <span></span>
    </div>
    
    <!-- Centro: Search -->
    <div class="search-language-cart">
        <form id="searchForm">
            <input type="text" placeholder="Cerca un PC" name="search">
        </form>
        
        <!-- Lingua (Sinistra dei bottoni) -->
        <select id="languageDropdown">
            <option value="it">ðŸ‡®ðŸ‡¹ ITA</option>
            <option value="en">ðŸ‡¬ðŸ‡§ ENG</option>
        </select>
        
        <!-- Destra: Controls -->
        <div class="right-controls">
            <button id="accountBtn" title="Account" class="icon-btn">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
            </button>
            <button id="cartBtn" title="Carrello" class="icon-btn">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                    <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                </svg>
            </button>
        </div>
    </div>
</header>

    <!-- Categories -->
    <nav class="categories nav-menu">
        <ul>
            <li><a href="pcgaming.html">Pc Gaming</a></li>
            <li><a href="offerte.html">Offerte</a></li>
            <li><a href="chisiamo.html">Chi siamo</a></li>
            <li><a href="discord.html">Discord</a></li>
        </ul>
    </nav>

    <!-- Main -->
    <main>
        <h1 class="page-title">ðŸ”¥ Offerte Speciali</h1>
        <p style="text-align:center; color:#ccc; font-size:1.2rem; margin-bottom:30px;">Approfitta dei nostri sconti esclusivi sui migliori PC gaming!</p>
        
        <div class="products" id="productsContainer">
            <!-- Prodotti in offerta caricati dinamicamente -->
        </div>
        
        <!-- Paginazione -->
        <div class="pagination"></div>
        
        <!-- Bottone PC Custom -->
        <div class="custom-pc-container">
            <h2>Personalizza il tuo Affare</h2>
            <p>Vuoi una configurazione in sconto? Costruisci il tuo PC custom e richiedi il nostro miglior prezzo!</p>
            <a href="custom-pc.html" class="custom-pc-btn">ðŸŽ® Crea PC Personalizzato</a>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Chi Siamo</h3>
                <ul>
                    <li><a href="chisiamo.html">La nostra storia</a></li>
                    <li><a href="contattaci.html">Contattaci</a></li>
                    <li><a href="discord.html">Community Discord</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>Informazioni Legali</h3>
                <p><strong>MISUSTECH s.r.l.</strong></p>
                <p>Partita IVA: <strong>IT01234567890</strong></p>
                <p>Via Roma 123, 76121<br>Barletta (BA) - Italia</p>
                <p><strong>Telefono:</strong> 377 590 0298<br><strong>Email:</strong> francesco.minutiello08@gmail.com</p>
            </div>

            <div class="footer-section">
                <h3>Supporto</h3>
                <ul>
                    <li><a href="contattaci.html">Contatti</a></li>
                    <li><a href="custom-pc.html">Crea PC Custom</a></li>
                    <li><a href="pcgaming.html">Catalogo Completo</a></li>
                </ul>
            </div>
        </div>

        <p>Â© 2025 MISUSTECH | Tutti i diritti riservati</p>
    </footer>

    <!-- Script -->
    <script src="script.js"></script>
    <script>
        // Carica solo prodotti in offerta
        document.addEventListener('DOMContentLoaded', () => {
            const productsContainer = document.getElementById('productsContainer');
            if(!productsContainer) return;

            const PRODUCTS_PER_PAGE = 12;
            let allProducts = [];
            let currentPage = 1;
            let filteredProducts = [];

            fetch('products.json')
                .then(res => res.json())
                .then(products => {
                    allProducts = products.filter(p => p.discount);
                    filteredProducts = allProducts;
                    
                    if(filteredProducts.length === 0) {
                        productsContainer.innerHTML = '<p style="text-align:center; color:#aaa; grid-column:1/-1; font-size:1.2rem; margin:50px 0;">Nessuna offerta disponibile al momento. Torna presto!</p>';
                        return;
                    }
                    
                    displayPage(1);
                    setupPagination();
                })
                .catch(err => console.error('Errore caricamento prodotti:', err));

            function displayProducts(products) {
                productsContainer.innerHTML = '';
                
                products.forEach(prod => {
                    const div = document.createElement('div');
                    div.className = 'product discount';
                    div.dataset.name = prod.name;
                    div.dataset.price = prod.discountPrice;
                    div.dataset.desc = prod.desc;
                    div.dataset.img = prod.img;

                    div.innerHTML = `
                        <img src="${prod.img}" alt="${prod.name}">
                        <h3>${prod.name}</h3>
                        <p>${prod.desc}</p>
                        <p>
                            <span class="original-price">â‚¬ ${prod.price.toFixed(2)}</span>
                            <span style="color:#9b59b6; font-weight:700; margin:10px 0;">â‚¬ ${prod.discountPrice.toFixed(2)}</span>
                        </p>
                        <button class="add-to-cart">Aggiungi al carrello</button>
                    `;

                    div.addEventListener('click', e => {
                        if(!e.target.classList.contains('add-to-cart')){
                            window.location.href = `product.html?name=${encodeURIComponent(prod.name)}`;
                        }
                    });

                    productsContainer.appendChild(div);
                });

                const addButtons = document.querySelectorAll('.add-to-cart');
                addButtons.forEach(btn => {
                    btn.addEventListener('click', e => {
                        e.stopPropagation();
                        const productEl = btn.closest('.product');
                        if(!productEl) return;

                        const name = productEl.dataset.name;
                        const price = parseFloat(productEl.dataset.price);
                        const img = productEl.dataset.img;
                        const desc = productEl.dataset.desc;

                        if(typeof cartObj !== 'undefined') {
                            const existing = cartObj.cart.find(p => p.name === name);
                            if(existing) {
                                existing.qty += 1;
                            } else {
                                cartObj.cart.push({name, desc, price, img, qty: 1});
                            }
                            
                            cartObj.updateCart();
                            
                            const cartSidebar = document.getElementById('cartSidebar');
                            if(cartSidebar) {
                                cartSidebar.classList.add('active');
                            }
                            
                            btn.textContent = 'âœ“ Aggiunto';
                            btn.style.background = '#27ae60';
                            setTimeout(() => {
                                btn.textContent = 'Aggiungi al carrello';
                                btn.style.background = '';
                            }, 1500);
                        }
                    });
                });
            }

            function displayPage(pageNum) {
                const start = (pageNum - 1) * PRODUCTS_PER_PAGE;
                const end = start + PRODUCTS_PER_PAGE;
                const pageProducts = filteredProducts.slice(start, end);
                
                displayProducts(pageProducts);
                currentPage = pageNum;
            }

            function setupPagination() {
                const totalPages = Math.ceil(filteredProducts.length / PRODUCTS_PER_PAGE);
                
                let paginationDiv = document.querySelector('.pagination');
                if(!paginationDiv) {
                    paginationDiv = document.createElement('div');
                    paginationDiv.className = 'pagination';
                    productsContainer.parentElement.appendChild(paginationDiv);
                }

                paginationDiv.innerHTML = '';

                if(totalPages <= 1) return;

                if(currentPage > 1) {
                    const prevBtn = document.createElement('button');
                    prevBtn.className = 'pagination-btn prev-btn';
                    prevBtn.innerHTML = 'â† Indietro';
                    prevBtn.addEventListener('click', () => {
                        displayPage(currentPage - 1);
                        window.scrollTo({top: 0, behavior: 'smooth'});
                    });
                    paginationDiv.appendChild(prevBtn);
                }

                const pageInfo = document.createElement('span');
                pageInfo.className = 'page-info';
                pageInfo.textContent = `Pagina ${currentPage} di ${totalPages}`;
                paginationDiv.appendChild(pageInfo);

                if(currentPage < totalPages) {
                    const nextBtn = document.createElement('button');
                    nextBtn.className = 'pagination-btn next-btn';
                    nextBtn.innerHTML = 'Avanti â†’';
                    nextBtn.addEventListener('click', () => {
                        displayPage(currentPage + 1);
                        window.scrollTo({top: 0, behavior: 'smooth'});
                    });
                    paginationDiv.appendChild(nextBtn);
                }
            }
        });
    </script>
<script src="languages.js"></script>
</body>
</html>