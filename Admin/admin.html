<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - MIRA</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <!-- Admin Header -->
    <header class="admin-header">
        <div class="admin-nav-container">
            <div class="admin-logo">
                <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
                    <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319z"/>
                </svg>
                <span>MIRA Admin</span>
            </div>
            
            <div class="admin-user-info">
                <span id="adminUsername">Admin</span>
                <button class="btn-logout" id="btnLogout">Esci</button>
            </div>
        </div>
    </header>

    <!-- Admin Container -->
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <nav class="admin-nav">
                <a href="#" class="admin-nav-link active" data-section="products">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"/>
                    </svg>
                    <span>Prodotti</span>
                </a>
                
                <a href="#" class="admin-nav-link" data-section="categories">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"/>
                    </svg>
                    <span>Categorie & Tags</span>
                </a>
                
                <a href="#" class="admin-nav-link" data-section="orders">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                    <span>Ordini</span>
                </a>
                
                <a href="#" class="admin-nav-link" data-section="messages">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"/>
                    </svg>
                    <span>Messaggi</span>
                </a>
            </nav>
            
            <div class="admin-sidebar-footer">
                <a href="index.html" class="btn-view-site">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                    </svg>
                    Vai al sito
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Products Section -->
            <section id="productsSection" class="admin-section active">
                <div class="section-header">
                    <div>
                        <h1>Gestione Prodotti</h1>
                        <p class="section-subtitle">Aggiungi, modifica o rimuovi prodotti dal catalogo</p>
                    </div>
                    <button class="btn-primary" id="btnAddProduct">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                        </svg>
                        Nuovo Prodotto
                    </button>
                </div>

                <!-- Filters -->
                <div class="filters-bar">
                    <div class="search-box">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                        </svg>
                        <input type="text" placeholder="Cerca prodotti..." id="searchProducts">
                    </div>
                    
                    <select id="filterCategory" class="filter-select">
                        <option value="">Tutte le categorie</option>
                        <!-- Popolato dinamicamente -->
                    </select>
                    
                    <select id="filterStatus" class="filter-select">
                        <option value="">Tutti gli stati</option>
                        <option value="1">Attivo</option>
                        <option value="0">Disattivato</option>
                    </select>
                </div>

                <!-- Products Table -->
                <div class="table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th style="width: 60px;">
                                    <input type="checkbox" id="selectAll">
                                </th>
                                <th style="width: 80px;">Immagine</th>
                                <th>Nome</th>
                                <th>Categoria</th>
                                <th style="width: 100px;">Prezzo</th>
                                <th style="width: 80px;">Stock</th>
                                <th style="width: 100px;">Stato</th>
                                <th style="width: 120px;">Azioni</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <tr>
                                <td colspan="8" style="text-align: center; padding: 40px; color: #6b7280;">
                                    Caricamento prodotti...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="table-pagination">
                    <div class="pagination-info">
                        Mostra <span id="paginationInfo">0-0 di 0</span> prodotti
                    </div>
                    <div class="pagination-controls" id="paginationControls">
                        <!-- Popolato dinamicamente -->
                    </div>
                </div>
            </section>

            <!-- Categories Section -->
            <section id="categoriesSection" class="admin-section">
                <div class="section-header">
                    <h1>Categorie & Tags</h1>
                </div>
                <p style="padding: 40px; color: #6b7280; text-align: center;">Sezione in sviluppo...</p>
            </section>

            <!-- Orders Section -->
            <section id="ordersSection" class="admin-section">
                <div class="section-header">
                    <h1>Ordini</h1>
                </div>
                <p style="padding: 40px; color: #6b7280; text-align: center;">Sezione in sviluppo...</p>
            </section>

            <!-- Messages Section -->
            <section id="messagesSection" class="admin-section">
                <div class="section-header">
                    <h1>Messaggi di Contatto</h1>
                </div>
                <p style="padding: 40px; color: #6b7280; text-align: center;">Sezione in sviluppo...</p>
            </section>
        </main>
    </div>

    <!-- Product Modal -->
    <div class="modal-overlay" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Nuovo Prodotto</h2>
                <button class="modal-close" id="closeModal">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                    </svg>
                </button>
            </div>
            
            <form id="productForm" class="modal-body">
                <input type="hidden" id="productId">
                
                <div class="form-grid">
                    <!-- Nome Prodotto -->
                    <div class="form-group full-width">
                        <label for="productName">Nome Prodotto *</label>
                        <input type="text" id="productName" required>
                    </div>

                    <!-- Descrizione -->
                    <div class="form-group full-width">
                        <label for="productDescription">Descrizione *</label>
                        <textarea id="productDescription" rows="4" required></textarea>
                    </div>

                    <!-- Categoria -->
                    <div class="form-group">
                        <label for="productCategory">Categoria *</label>
                        <select id="productCategory" required>
                            <option value="">Seleziona categoria</option>
                            <!-- Popolato dinamicamente -->
                        </select>
                    </div>

                    <!-- Tags -->
                    <div class="form-group">
                        <label for="productTags">Tags</label>
                        <select id="productTags" multiple>
                            <!-- Popolato dinamicamente -->
                        </select>
                        <small>Tieni premuto Ctrl (Cmd su Mac) per selezionare più tag</small>
                    </div>

                    <!-- Prezzo -->
                    <div class="form-group">
                        <label for="productPrice">Prezzo (€) *</label>
                        <input type="number" id="productPrice" step="0.01" min="0" required>
                    </div>

                    <!-- Prezzo Scontato -->
                    <div class="form-group">
                        <label for="productDiscountPrice">Prezzo Scontato (€)</label>
                        <input type="number" id="productDiscountPrice" step="0.01" min="0">
                    </div>

                    <!-- Stock -->
                    <div class="form-group">
                        <label for="productStock">Stock *</label>
                        <input type="number" id="productStock" min="0" required>
                    </div>

                    <!-- URL Immagine -->
                    <div class="form-group">
                        <label for="productImage">URL Immagine *</label>
                        <input type="url" id="productImage" placeholder="https://..." required>
                    </div>

                    <!-- Checkboxes -->
                    <div class="form-group full-width">
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="productIsDiscount">
                                <span>Applica sconto</span>
                            </label>
                            
                            <label class="checkbox-label">
                                <input type="checkbox" id="productIsFeatured">
                                <span>Prodotto in evidenza</span>
                            </label>
                            
                            <label class="checkbox-label">
                                <input type="checkbox" id="productIsActive" checked>
                                <span>Prodotto attivo</span>
                            </label>
                        </div>
                    </div>

                    <!-- Specifiche Tecniche -->
                    <div class="form-group full-width">
                        <label>Specifiche Tecniche</label>
                        <div id="specsContainer">
                            <div class="spec-row">
                                <input type="text" placeholder="Chiave (es: CPU)" class="spec-key">
                                <input type="text" placeholder="Valore (es: Intel i7)" class="spec-value">
                                <button type="button" class="btn-remove-spec">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <button type="button" class="btn-secondary" id="btnAddSpec">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                            </svg>
                            Aggiungi Specifica
                        </button>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" id="btnCancelProduct">Annulla</button>
                    <button type="submit" class="btn-primary" id="btnSaveProduct">Salva Prodotto</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Conferma Eliminazione</h2>
                <button class="modal-close" id="closeDeleteModal">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                    </svg>
                </button>
            </div>
            
            <div class="modal-body">
                <p id="deleteMessage">Sei sicuro di voler eliminare questo prodotto?</p>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="btnCancelDelete">Annulla</button>
                <button type="button" class="btn-danger" id="btnConfirmDelete">Elimina</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16" class="toast-icon">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
            </svg>
            <span class="toast-message">Operazione completata</span>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>